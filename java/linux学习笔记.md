###  linux

#### linux入门

##### linux  介绍

* 吉祥物 Tux（领带）                                                                                                                                                                                      
* 创始人 linus (林纳斯) 芬兰人
* linux主要的发行版：准确来讲，Linux是一个内核，其他厂商进行二次开发，进而形成了各种版本。
* Linux与unix的关系，分时系统--计算机可以多用户使用
* GUN计划--号召大家设计免费的软件所以Linux叫做GNU/Linux

#### linux 安装虚拟机

* 安装vm
* 安装centOS
* 运行

##### 虚拟机网络连接的3种方式

* 桥接

  > 特点：主机windows虚拟机地址网段和主机在同一个网段，便于通讯
  >
  > 缺点：ip地址是有限的，可能造成ip地址冲突

* Nat（网络地址转换模式）

* 仅主机模式 单独的一台电脑

  >生成复杂密码 --- 密码生成器

* Linux分区

  >/boot 
  >
  >swap分区：交换分区，作用内存不够用吗，充当临时内存
  >
  >/ 根分区: 挂载点

#### Linux目录结构（树结构）

>/根目录
>
>​	/bin
>
>​	/home
>
>​	/boot
>
>​	/root  

* 在linux中，一切皆为文件

>/etc 一般存配置文件
>
>/var一般存日志文件
>
>/bin 存放最经常使用的指令
>
>/sbin s代表Super User，这里存放的是系统管理员使用的系统管理程序
>
>/home 存放普通用户的主目录，在linux中每个用户都有一个自己的目录，一般该目录是以用户的账户命名的
>
>/dev设备管理目录  
>
>/media 目录，u盘，dvd，光驱
>
>/lib 系统开机所需要的最基本的动态连接

##### 目录结构的具体介绍

* /lib 
* /proc
* /mnt

##### 总结

* linux的目录有且只有一个根目录
* linux的各个目录存放的内容是规划好，不用乱放文件
* linux是以文件的形式管理我们的设备，因此linux系统，一切皆为文件
* linux中各个文件目录存放的内容，一般是约定的，需要牢记
* linux目录树要记住

#### linux实际操作

##### 远程连接到linux

==工 具==

* Xshell -- 远程登录到linux操作系统
* 远程上转下载文件软件  -- Xftp 

==安装==

* 如果安装好随后进行访问linux系统的话，需要一个前提，就是linux启动了sshd服务，具体过程通过 `setup`命令进入系统设置中配置，该服务监听22号端口

#### linux 基本指令

* 所有linux都会内建vi文本编辑器
* vim具有程序编辑的能力，可以看作是vi的增强

##### vi和vim的常见三种模式

>1. 正常模式：当以vi打开档案时，就是一般模式了，在正常模式下，可以使用快捷键
>2. 插入模式/编辑模式：在这种模式下，可以进行编辑，一般输入i（但不绝对）
>3. 命令行模式：提供退出，存盘等指令，如果修改了文件，不想保存必须用  `q！`退出，`q`只能在不修改文件的情况下才能退出

##### 模式的相互转换

* vim进入的是正常模式   输入i或者a进入编辑模式，编辑模式输入`esc`退回到一般模式，然后一般模式下输入``：``,进入命令行模式，在添加命令退出vim编辑

* vim快捷键（在一般模式下）

  >拷贝当前行 `yy`  并粘贴（p）
  >
  >删除当前行`dd`,删除多少行就输入数字再加快捷键
  >
  >直接到文件末尾（G）文件首行（g）
  >
  >输入`u`回到上一个动作，即撤销
  >
  >显示行号 ，输入命令  `：set nu`  

##### 系统基本命令使用

  * 开机，重启
> shutdown -h now 表示立即关机
>
> shutdown -h 1 :表示一分钟后关机
>
> shutdown -r now 立即重启
>
> halt 关机
>
> reboot  重启系统
>
> sync 内存的数据写入到磁盘，防数据丢失

* 用户注销，新建用户

  >logout 注销指令在图形界面无效

  * 用户管理

  >Linux是一个多任务多用户的系统。
  >
  >Linux用户至少要属于一个组
  >
  >==添加用户== **默认存在/home目录下**
  >
  >useradd -name(默认创建一个和用户名相同的组 )
  >
  >useradd -d 指定目录，指定用户名
  >
  >==指定密码==
  >
  >passwd 用户名（需要在根用户下才能有足够的权限）
  >
  >==删除用户及用户主目录==
  >
  >userdel 用户名  `保留了家目录`
  >
  >userdel 用户名 -r    ，`删除用户的同时删除了主目录`
  >
  >**在删除用户时，我们一般不会将家目录删除**
  >
  >==查询用户信息==
  >
  >id 用户名 ，**返回结果**：``uid``用户id号,`gid`所在组的id号，`groups` 组的名称
  >
  >==切换用户==
  >
  >su 用户名
  >
  >**从权限高的切换到权限低的用户时，不需要输入密码，反之需要**
  >
  >==查看当前用户组==
  >
  >`whoami` 
  >
  >==增加组==
  >
  >`groupadd `组名
  >
  >==删除组==
  >
  >groupdel 组名
  >
  >==添加用户时直接加上组==
  >
  >useradd -g 组名 用户名
  >
  >==修改用户所在组==
  >
  >usermod -g 组名 用户名
  >
  >**用户配置文件（/etc/passwd/)**
  >
  >**组配置文件（组信息）/etc/group**
  >
  >**口令配置文件（密码和登陆信息，已加密）/etc/shadow**
  >

##### linux运行级别

1. `0`： 关机
2. `1`：单用户（找回丢失密码）
3. `2`：多用户无网络服务
4. `3`：多用户有网络服务
5. `4`:  保留
6. `5`:  图形界面
7. `6`：重启

>系统的运行级别配置文件（/etc/inittab)
>
>==切换到指定运行级别的指令==
>
>`init 数字级别`
>
>==如何找回密码==
>
>进入单用户模式，然后修改密码，因为进入单用户模式，用户不需要密码
>
>具体操作：开机时，在引导时输入 回车键 -->看到一个界面 输入e --> 看到一个新的界面，选中第二行（编辑内核） 输入e  --> 在这行最后输入一个1  --> 输入回车键， -- > 再次输入b，进入到单用户模式。
>
>这时，我们就进入到单用户模式，使用passwd修改root密码

##### 帮助指令

* 当我们对某个指令不熟悉时，我们可以使用linux提供的帮助指令来了解这个指令的使用方法
* 获取帮助信息

>==man==:  (功能描述:获取帮助信息)
>
>`eg`： `man ls `
>
>==help==: 获取shell内置命令的帮助信息
>
>`eg`： `help cd`

##### 文件目录类指令

###### cd （change directory)切换目录 ，从根目录开始找

>绝对路径 
>
> `cd`  /home 即从根目录开始定位/home目录
>
>相对路径 
>
>`cd`  ../home  从当前工作目录开始定位到需要的目录
>
>`cd`直接回到家目录

###### pwd （print work directory)显示当前所在工作目录全路径

###### mkdir （make directory) 建立目录

>mdkir  要创建的目录名
>
>创建多级目录，需要带一个-p
>
>`mkdir -p /home/animal/tiger`  否则创建多级目录会报错

###### rmdir 指令 删除空目录

>rmdir 要删除的目录名  **无法删除有文件的目录**
>
>若要删除非空目录，需要`rm - rf`

###### clear 清屏

###### touch change file timestamps指令（创建空文件）

>touch 文件名

###### cp 指令（拷贝指令）拷贝文件到指定目录

>cp   选项（-r，代表递归复制整个文件夹）   原文件  目标目录 
>
>路径有绝对路径和相对路径之分
>
>cp  -r test/ zwy/  复制文件夹到另一个文件夹。若有相同文件，则询问是否覆盖
>
>\cp  -r test/ zwy/  强制覆盖文件夹

###### rm 移除文件或目录

>rm 选项  删除的文件名
>
>-r 递归删除整个文件夹
>
>-f 强制删除文件

###### mv 移动文件与目录或重命名

>mv 旧文件名  新文件名  （重命名）
>
>`mv aaa.txt pig.txt`  ==将``aaa.txt``移动到当前目录下，因为同目录下有已经`aaa.txt` ，故程序执行了重命名，即将`aaa.txt`重命名为`pig.txt`==`
>
>mv 文件目录  文件目录  （移动文件或者剪切）
>
>mv  /home/pig.txt  /root
>
>mv  pig.txt /root/

###### cat指令  只能浏览不能修改，以只读的方式打开文件

>-n 显示行号
>
>cat  文件目录名称
>
>cat -n 文件名  | more

###### more 指令 以全屏的方式按页显示内容

>more 文件名

###### less 指令 用来分屏查看文件内容，和more指令类似，但更加强大

>less 文件名

###### `>` 和`>>` ： 输出重定向和输出追加

>==>== 代表是重定向到一个文件，会将原来文件内容覆盖
>
>==>>== 是追加到内容到文件，不会覆盖文件内容，追加到文件内容底部
>
>执行命令时，如果文件不存在则创建文件
>
>`ls -l > 文件名`  ，把`ls -l`指令输出的内容覆盖写入到文件中
>
>`ls -al >> 文件名`，把`ls -al`指令输出的内容追加到文件中，文件原先的内容依然保存
>
>`cat 文件1 > 文件2`把一个文件内容覆盖写入到另一个文件中
>
>`echo 内容 >> 文件名` 把文件内容追加到另一个文件中

###### echo 输出内容到控制台

>echo 选项  输出内容 
>
>利用`echo`输出环境变量  `echo $PATH`大小写敏感

###### head 显示文件的开头部分（默认查看文件前十行）

>`head 文件名` 查看前十行
>
>`head -n 6 文件名`   查看文件前6行

###### tail 查看文件的尾部部分

>`tail 文件名` 查看文件后十行
>
>`tail -n 6 文件名`   查看文件后6行
>
>`tail -f 文件名` ==实时监控==文件的变化，如果有变化，会打印在控制台

###### ln指令 软链接指令也叫符号链接，相当于windows的快捷方式

>`ln -s /root linkToRoot` 创建一个指向/root的链接，链接名为linkToRoot
>
>用 ls -l 显示出来的链接格式为：linkToRoot --> /root

###### history指令 可查看已经执行过的历史命令，也可以执行历史指令

>`history` 显示所有执行过的历史命令,按时间从早到晚，越晚执行的命令编号越大
>
>`history 10` 显示最近执行过的历史命令
>
>`！178`执行历史编号为178的指令

###### 组的创建

>groupadd  组名
>
>groupadd 组名 ----组的创建
>
>useradd -g 组名 用户名 ----在组下创建用户



###### linux分组

* 概念：在linux中，每个用户必须属于一个组，不能独立于组外，

>linux的文件属性
>
>1. 所有者：文件的创建者，就自然的成为文件的所有者
>
>   查看文件所有者：ls -ahl 
>
>   改变文件所有者：chown（change file owner） 用户名 文件名
>
>2. 所在组
>
>   修改文件所在组：chgrp  组名  文件名
>
>3. 其他组
>
>   除去文件的所有者和所在组的用户外，系统其他用户都是文件的其他组
>
>4. 改变用户所在组
>
>   usermod -g 组名 用户名  改变用户所在组
>
>   usermod -d 组名 用户名  改变用户所在目录

###### 权限管理(主要是文件和目录的权限)

>``-`` `rw-`  `r- - ` ` r- - ` `1` 
>
>1. 第一个符号代表文件类型：- 代表普通文件 ，d代表目录，l代表是连接文件，c代表是字符设备（键盘，鼠标），b代表是块文件（硬盘）
>2. 第二三四个字符，表示文件所有者拥有的权限；
>3. 第五六七个字符。表示文件所在组用户的权限
>4. 第八九十个字符，表示文件其他组的用户权限
>5. 第十一个字符，表示如果是文件，表示硬链接的数，如果是目录，表示该目录的子目录个数
>
>==备注== ：其中：r代表读权限，w代表写权限，-代表无权限，x代表可执行权限，具体到文件与目录又有所不同，x在目录时，代表可以进入该目录，在文件时，意味文件可以被执行
>
>**权限还可以用数字来表示 ，其中r代表 4 ，w代表2 ，x代表1，因此权限还可以表示为7** 

###### 修改（管理权限）

>* 通过chmod指令，修改文件或者目录  权限
>
>两种方式：
>
>1. 通过`+` `-` `=`变更权限（u：所有者，g：所有组，o:其他人 ，a：所有人（u，g，o的总和））
>
>   chmod u=rwx，g= rx,o=x 文件目录名

##### crond任务调度

* 定时调度脚本或者代码

>概述：系统在某个特定时间执行的特定的命令或程序
>
>案例： 每小时的每分钟执行ls -l /etc/ > /temp/to.txt命令
>
>步骤：
>
>1. crontab -e
>2. `*/1**** ls -l /etc >> /tmp/to.txt  `
>3. 接下来任务就成功了 
>
>==参数细节说明==
>
>5个占位符说明：第一个 *    代表一小时当中的第几分钟（0-59）
>
>第二个 *  代表一天当中的第几小时（0-23）
>
>第三个 * 代表一月当中的第几天（1-31）
>
>第四个 * 代表一年当中的第几月（1-12）
>
>第五个  *  代表一周当中的星期几（0-7，其中0和7都代表星期日）
>
>==特殊符号==
>
>`* ` 代表任何时间

##### 磁盘分区和挂载

* 分区有两种模式

>1. mbr分区
>
>* 最多支持4个主分区，且最大只支持2Tb，拥有很好的兼容性
>* 系统只能安装在主分区
>* 拓展分区要占一个主分区
>
>2. gtp分区
>
>* 支持无限多个主分区（但操作系统可能限制，比如windows下最多128分区）
>* 最大支持18EB（1Eb= 1024Pb ，1pb= 1024TB）
>* ==win7 64位后支持gtp==

* Linux 分区

>* `linux`无论有几个分区，分给那个目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构，linux每个分区都是用来组成整个文件系统的一部分
>* `linux` 采用了一种叫==载入==的处理方法，它的整个文件系统包含了一整套的文件和目录，且将一个分区和一个目录联系起来，这时要载入的一个分区将使它的存储空间在一个目录下获得

* 在``linux``中硬盘分`ide`硬盘和`scsi`硬盘，目前基本是`scsi`硬盘
* 使用`lsblk(list block device)`查看硬盘分区信息，**老师不离开**方便记忆

##### 挂载硬盘

* 当硬盘空间不够时，新增硬盘对其进行挂载

>给`linux`增加一个新的硬盘，并挂载到指定目录下
>
>**步骤**
>
>1. 虚拟机添加硬盘
>2. 分区 ：`fdisk /dev/sdb`  
>3. 格式化 : `mkfs -t ext4 /dev/sdb1`
>4. 挂载 : 找到指定目录，`mount /dev/sdb1  挂载指定目录`  ==只是临时挂载，当重启电脑后，挂载关系不存在==
>5. 设置自动挂载 （永久挂载）:  修改配置文件`vim /etc/fstab`    使配置文件生效` mount -a`

##### 磁盘情况查询

>查询系统整体磁盘使用情况
>
>`df -l` 磁盘情况查询
>
>`du -h` 查询指定目录占用大小，默认为当前目录      

##### 网络配置

>* 目前`linux`网络配置采用NAT模式，

##### rpm（redHat package manager）包的管理

* 类似于windows中的setup.exe工具

>简单查询指令 ：
>
>`rpm -qa|grep  需要查询的软件`如果没有结果就不返回值
>
>`rpm -qi 查询的软件` 查询安装软件的详细信息
>
>`rpm -ql 查询的软件` 查询软件安装了那些文件及位置

##### yum（需要联网）

* `yum list|grep  软件` 查询yum服务器是否有需要安装的软件
* `yum install 软件`  安装指定的yum 软件包 



















  















